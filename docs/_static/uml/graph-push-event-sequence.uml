    @startuml
    hide footbox
    skinparam shadowing false

    actor Client
    participant "Webhook\nService" as Webhook
    participant GitLab
    participant "Tokens\nRepository" as Tokens
    database "Event\nLog" as Log
    participant "Triples\nGenerator" as Triples
    database "RDF Store" as Jena

    == Push Event ==
    Client->Webhook: POST /webhooks/events
    activate Webhook
    Webhook->Tokens: GET /projects/:id/tokens
    activate Tokens
    Tokens->Webhook: OK (200) with Access Token or NOT_FOUND (404)
    deactivate Tokens
    group Commit Events finding process
    Webhook->Webhook ++ : find commits ids not in the Event Log (start with the Push Event's `commit_to`)
    Webhook->Log: filter out commits which are already in the Event Log
    activate Log
    Log->Webhook: commitIds not in the Event Log
    deactivate Log
    Webhook->GitLab: GET /api/v4/projects/:id/repository/commits/:id
    activate GitLab
    GitLab->Webhook: OK (200) with commit info
    deactivate GitLab
    Webhook->Log: store Commit Events
    Webhook->Webhook : repeat the Commit Events finding process for the current Commit Events' parents
    return
    end
    Webhook->Client: OK (200)
    deactivate Webhook
    ref over Log, Jena: Commit Event to RDF Triples

    @enduml
